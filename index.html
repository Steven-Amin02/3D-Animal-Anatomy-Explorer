<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- Updated title to reflect cat anatomy -->
  <title>3D Cat Anatomy Explorer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Sidebar">
      <div class="logo">Cat Anatomy Explorer</div>

      <section class="section">
        <div class="section-title">Visualization mode</div>
        <div class="state-toggle">
          <!-- Added third button for Skeleton mode -->
          <button class="state-btn active" data-state="normal" role="tab" aria-selected="true">🐱 Normal</button>
          <button class="state-btn" data-state="muscle" role="tab" aria-selected="false">💪 Muscles</button>
          <button class="state-btn" data-state="skeleton" role="tab" aria-selected="false">🦴 Skeleton</button>
        </div>
      </section>

      <section class="section">
        <div class="section-title">Load 3D models</div>
        <div class="card">
          <label for="normalModel" class="upload-area" id="normalUpload" tabindex="0" aria-label="Upload normal model (.glb)">
            <div class="upload-icon">📦</div>
            <div class="upload-text">Upload Normal Model (.glb)</div>
          </label>
          <input type="file" id="normalModel" accept=".glb"/>
        </div>
        <div class="card">
          <label for="muscleModel" class="upload-area" id="muscleUpload" tabindex="0" aria-label="Upload muscle model (.glb)">
            <div class="upload-icon">📦</div>
            <div class="upload-text">Upload Muscle Model (.glb)</div>
          </label>
          <input type="file" id="muscleModel" accept=".glb"/>
        </div>
        <!-- Added upload card for skeleton model -->
        <div class="card">
          <label for="skeletonModel" class="upload-area" id="skeletonUpload" tabindex="0" aria-label="Upload skeleton model (.glb)">
            <div class="upload-icon">📦</div>
            <div class="upload-text">Upload Skeleton Model (.glb)</div>
          </label>
          <input type="file" id="skeletonModel" accept=".glb"/>
        </div>
      </section>
    </aside>

    <!-- 3D Canvas Area -->
    <main class="canvas-area" aria-label="3D canvas area">
      <button class="theme-toggle" id="themeToggle" title="Toggle dark mode" aria-label="Toggle dark mode">🌙</button>

      <canvas id="canvas3d" aria-label="3D view"></canvas>

      <div class="loading" id="loading" style="display: none;">
        <div class="loading-inner">
          <div class="spinner"></div>
          <div id="loadingText">Loading 3D Model...</div>
        </div>
      </div>

      <div class="controls-overlay" aria-label="View controls">
        <button class="control-btn" id="resetView" title="Reset view" aria-label="Reset view">🔄</button>
        <button class="control-btn" id="zoomIn" title="Zoom in" aria-label="Zoom in">➕</button>
        <button class="control-btn" id="zoomOut" title="Zoom out" aria-label="Zoom out">➖</button>
      </div>

      <div class="instructions">
        <span>🖱️ Drag to Rotate</span>
        <span>🔍 Scroll to Zoom</span>
        <span>📍 Click Hotspots</span>
        <span>👆 Double-click parts for info</span>
      </div>

      <!-- Hotspots UI layer -->
      <div class="hotspot-layer" id="hotspotLayer"></div>

      <!-- Info Drawer -->
      <section class="info-drawer" id="infoDrawer" aria-live="polite">
        <div class="drawer-header">
          <span class="drawer-icon" id="drawerIcon">🔍</span>
          <span class="drawer-title" id="drawerTitle">Part</span>
          <span class="drawer-category" id="drawerCategory">Anatomy</span>
          <button class="drawer-close" id="drawerClose" title="Close details">✕</button>
        </div>
        <div class="drawer-tabs">
          <button class="tab-btn active" data-tab="overview">Overview</button>
          <button class="tab-btn" data-tab="details">Details</button>
          <button class="tab-btn" data-tab="media">Media</button>
        </div>
        <div class="drawer-body">
          <div id="tab-overview">
            <p class="drawer-desc" id="drawerDesc">Select a hotspot or double-click a part to view information.</p>
          </div>
          <div id="tab-details" style="display:none;">
            <div class="detail-grid" id="drawerDetails"></div>
          </div>
          <div id="tab-media" style="display:none;">
            <div class="media-grid" id="drawerMedia">
              <div class="media-item">No media yet</div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Three.js and addons -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="script.js"></script>
</body>
</html>
